<dom-module id="results-panel">
  <template>
    <style>
      :host {
        display: block;
      }
      .page-header {
        border-bottom: 1px solid #eee;
      }
      .bold {
        font-weight: bold;
      }
      .update-overlay {
        position: fixed;
        background: rgba(255,255,255,.8);
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        padding: 150px 20px 20px 20px;
        text-align: center;
        color: #888;
        font-size: 28px;
        display: none;
      }
    </style>

    <div id="updateOverlay" class="update-overlay">
      <i class="fa fa-spinner fa-spin"></i> Updating...
    </div>

    <!--<price-yield-popup id="priceYieldPopup" on-yield-price-change="onPriceYieldChange"></price-yield-popup>-->

    <div style="padding: 0 10px">

    <h4>Overview</h4>
    
    <div class="help-block">Link: <a id="runLink" target="_blank"></a></div>

    <table class="table">
      <!--<tr>
        <td style="width: 150px" class="bold">Crop Price/Yield</td>
        <td>
          <a class="btn btn-link" on-click="showPriceYieldPopup">Change</a>
        </td>
      </tr>-->
      <tr>
        <td class="bold">Parcels</td>
        <td id="parcelCount"></td>
      </tr>
      <tr>
        <td class="bold">Total Acres</td>
        <td id="acreCount"></td>
      </tr>
      <tr>
        <td class="bold">Total Poplar Available <span id="runtime"></span>*</td>
        <td id="harvestTotal"></td>
      </tr>
      <tr>
        <td class="bold">Average Yearly Poplar Available*</td>
        <td id="avgPerYear"></td>
      </tr>
      <tr>
        <td class="bold">Average Yield per (Acre / Year)</td>
        <td id="avgYield"></td>
      </tr>
      <tr>
        <td colspan="2"><div class="help-block">*Based on adoption % below.</div></td>
      </tr>
    </table>
    
    <h4 class="page-header">Price</h4>
    <table class="table">
      <tr>
        <td style="width: 150px" class="bold">Price ($ / Mg)</td>
        <td>
          <input type="number" id="poplarPriceInput" class="form-control"  value="24" on-change="onPriceChange" />
        </td>
      </tr>
      <tr>
        <td class="bold">Farmers Min Willingness to Accept:</td>
        <td id="farmersMWA"></td>
      </tr>
      <tr>
        <td class="bold">Refinery Max Willingness to Pay:</td>
        <td id="refineryMWP"></td>
      </tr>
    </table>
    
    
    <h4 class="page-heaader">Refinery <small id="refineryType"></small></h4>
    
    <div class="row">
      <div class="col-sm-6">
        <table class="table">
          <tr>
            <td class="bold">Capital Cost</td>
            <td id="refineryCapitalCost"></td>
          </tr>
          <tr>
            <td class="bold">Operating Cost</td>
            <td id="refineryOperatingCost"></td>
          </tr>
          <tr>
            <td class="bold">Poplar Cost</td>
            <td id="refineryPoplarCost"></td>
          </tr>
          <tr>
            <td class="bold">Transporation Cost</td>
            <td id="refineryTransportationCost"></td>
          </tr>
          <tr style="background-color:#eee">
            <td class="bold">Total Cost</td>
            <td id="refineryTotalCost"></td>
          </tr>
        </table>
      </div>
      <div class="col-sm-6">
        <table class="table">
          <tr>
            <td class="bold">Income <small id="refineryProduct"></small></td>
            <td id="refineryIncome"></td>
          </tr>
          <tr>
            <td class="bold">Net</td>
            <td id="refineryNet"></td>
          </tr>
          <tr style="background-color:#eee">
            <td class="bold">Annual Rate of Return</td>
            <td id="refineryRor"></td>
          </tr>
        </table>
      </div>
    </div>
    

      <tr>
        <td colspan="2"></td>
      </tr>

    </table>

    <h4 class="page-header">Adoption <span id="adoptionAmount"></span></h4>

    <div><span id="parcelPercent"></span> All parcels in area adopted.</div>
    <div><span id="validParcelPercent"></span> Competing crop parcels adopted.</div>

    <adoption-competing-pie-chart id="adoptionCompetingPieChart"></adoption-competing-pie-chart>

    <adoption-crop-pie-chart id="adoptionCropPieChart"></adoption-crop-pie-chart>

    <h4 class="page-header">Adoption By Price</h4>
    <div id="adoptionChart"></div>
    
    <h4 class="page-header">Poplar Adoption Yield By Price</h4>
    <div id="renderYieldAdoption"></div>
    
    <h4 class="page-header">Export Data</h4>
    <div>
      <form id="exportJsonForm" method="post" action="/export/toJson" target="_blank">
        <input type="hidden" name="data" value="data" id="exportJsonFormData" />
        <a on-click="exportJson"><i class="fa fa-download"></i> Export as JSON</a>
      </form>
    </div>

    </div>

  </template>
</dom-module>
